{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createGalleryMarkup({ hits }) {\n    if (hits.length === 0) {\n        onSearchError();\n        return;\n    }\n\n    return hits\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n  <ul class=\"gallery-attribute-list\">\n    <li class=\"attribute-item\">\n          <p class=\"attribute\">Likes</p>\n          <p class=\"attribute-value\">${likes}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Views</p>\n          <p class=\"attribute-value\">${views}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Comments</p>\n          <p class=\"attribute-value\">${comments}</p>\n        </li>\n        <li class=\"attribute-item\">\n          <p class=\"attribute\">Downloads</p>\n          <p class=\"attribute-value\">${downloads}</p>\n        </li>\n        </ul>\n</li>`\n        )\n        .join('');\n}\n","import axios from \"axios\";\n\nconst API_KEY = '45360350-58fd54754bd8f677bef7c2cc3';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nexport const limit = 15;\n\nexport async function searchImages(query, page) {\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        per_page: limit,\n        page,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    try {\n        const response = await axios.get(`?${searchParams}`);\n        return response.data;\n    } catch (error) {\n        throw new Error('Failed to fetch images');\n    }\n}\n","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryMarkup } from \"./js/render-functions.js\";\nimport { searchImages, limit } from \"./js/pixabay-api.js\";\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.js-load-btn');\n\nlet currentPage = 1;\nlet query = '';\n\nbtnLoadMore.style.display = 'none';\nloader.style.display = 'none';\n\nsearchForm.addEventListener('submit', handleSearch);\n\n\nasync function handleSearch(event) {\n    event.preventDefault();\n    const form = event.currentTarget;\n    query = form.elements.query.value.trim().toLowerCase();\n\n    if (query === '') {\n        gallery.innerHTML = '';\n        showWarningMessage('Please enter a search query.');\n        return;\n    }\n\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n    currentPage = 1;\n\n    try {\n        const data = await searchImages(query, currentPage);\n        const markup = createGalleryMarkup(data);\n        gallery.innerHTML = markup;\n        lightbox.refresh();\n\n        if (data.totalHits > 15) {\n            btnLoadMore.style.display = 'block';\n        } else {\n            btnLoadMore.style.display = 'none';\n        }\n    } catch (error) {\n        onSearchError(error);\n    } finally {\n        loader.style.display = 'none';\n        form.reset();\n    }\n}\n\nbtnLoadMore.addEventListener('click', async () => {\n    currentPage += 1;\n    loader.style.display = 'block';\n\n    try {\n        const data = await searchImages(query, currentPage);\n        const markup = createGalleryMarkup(data);\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n\n        scrollPage();\n\n        const totalPages = Math.ceil(data.totalHits / limit);\n\n        if (currentPage >= totalPages) {\n            btnLoadMore.style.display = 'none';\n            showInfoMessage(\n                \"We're sorry, but you've reached the end of search results.\"\n            );\n        }\n    } catch (error) {\n        onSearchError(error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n\nfunction onSearchError(error) {\n    showErrorMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n    );\n    gallery.innerHTML = '';\n    btnLoadMore.style.display = 'none';\n    loader.style.display = 'none';\n}\n\nfunction scrollPage() {\n    const itemHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: itemHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\nlet lightbox = new SimpleLightbox('.gallery .gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nfunction showErrorMessage(message) {\n    iziToast.error({\n        class: 'izi-toast',\n        message: message,\n        position: 'topRight',\n    });\n}\n\nfunction showWarningMessage(message) {\n    iziToast.warning({\n        class: 'izi-toast',\n        message: message,\n        position: 'topRight',\n    });\n}\n\nfunction showInfoMessage(message) {\n    iziToast.info({\n        class: 'izi-toast',\n        message: message,\n        position: 'bottomRight',\n    });\n}"],"names":["createGalleryMarkup","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","axios","limit","searchImages","query","page","searchParams","gallery","searchForm","loader","btnLoadMore","currentPage","handleSearch","event","form","showWarningMessage","data","markup","lightbox","onSearchError","scrollPage","totalPages","showInfoMessage","error","showErrorMessage","itemHeight","SimpleLightbox","message","iziToast"],"mappings":"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"}